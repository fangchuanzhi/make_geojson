const create_geojson=require('../process/create_geojson').create_geojson;
const mysqlConfig = require("../../config").config.mysql;
const Connection = require("../lib/Connection").Connection;
const wkt = require('terraformer-wkt-parser');
var conn = new Connection(mysqlConfig);
/**
 * 测试数据库查询
 */
async function test_mysql() {
    let res = await conn.query("SELECT * FROM zlzysj_py where objectid=1");
    console.log(res);
}
/**
 * 测试geojson 和wkt转换
 */
async function test() {
    var geometry = {
        "type": "MultiPolygon",
        "coordinates": [
            [
                [
                    [
                        119.7788,
                        25.41418
                    ],
                    [
                        119.7675,
                        25.3978
                    ],
                    [
                        119.68873,
                        25.43275
                    ],
                    [
                        119.67507,
                        25.47136
                    ],
                    [
                        119.68292,
                        25.60273
                    ],
                    [
                        119.78619,
                        25.66671
                    ],
                    [
                        119.80404,
                        25.52784
                    ],
                    [
                        119.7788,
                        25.41418
                    ]
                ]
            ],
            [
                [
                    [
                        118.74963,
                        28.25673
                    ],
                    [
                        118.9041,
                        27.61483
                    ],
                    [
                        118.86894,
                        27.52111
                    ],
                    [
                        119.263,
                        27.42467
                    ],
                    [
                        119.49651,
                        27.64797
                    ],
                    [
                        119.6306,
                        27.67204
                    ],
                    [
                        119.68421,
                        27.43463
                    ],
                    [
                        119.81504,
                        27.29966
                    ],
                    [
                        120.24267,
                        27.43776
                    ],
                    [
                        120.33644,
                        27.40274
                    ],
                    [
                        120.43252,
                        27.16863
                    ],
                    [
                        120.26994,
                        27.10327
                    ],
                    [
                        120.22859,
                        26.92103
                    ],
                    [
                        120.11215,
                        26.78047
                    ],
                    [
                        120.00702,
                        26.81932
                    ],
                    [
                        119.8416,
                        26.8556
                    ],
                    [
                        119.69652,
                        26.81887
                    ],
                    [
                        119.54614,
                        26.6299
                    ],
                    [
                        119.76124,
                        26.40965
                    ],
                    [
                        119.74283,
                        26.18001
                    ],
                    [
                        119.71458,
                        26.01235
                    ],
                    [
                        119.62525,
                        25.90373
                    ],
                    [
                        119.58593,
                        25.58536
                    ],
                    [
                        119.51242,
                        25.39926
                    ],
                    [
                        119.36448,
                        25.52781
                    ],
                    [
                        119.1492,
                        25.44399
                    ],
                    [
                        119.34631,
                        25.27299
                    ],
                    [
                        119.15829,
                        25.12871
                    ],
                    [
                        119.02617,
                        25.02646
                    ],
                    [
                        118.91424,
                        24.96067
                    ],
                    [
                        118.60679,
                        24.52912
                    ],
                    [
                        118.49654,
                        24.62742
                    ],
                    [
                        118.31742,
                        24.56275
                    ],
                    [
                        118.1558,
                        24.64238
                    ],
                    [
                        118.03751,
                        24.44133
                    ],
                    [
                        117.98341,
                        24.19853
                    ],
                    [
                        117.89925,
                        24.0394
                    ],
                    [
                        117.59206,
                        23.88612
                    ],
                    [
                        117.42916,
                        23.75779
                    ],
                    [
                        117.27046,
                        23.73636
                    ],
                    [
                        117.18944,
                        23.61962
                    ],
                    [
                        117.05572,
                        23.69025
                    ],
                    [
                        116.93693,
                        24.03938
                    ],
                    [
                        116.90046,
                        24.37522
                    ],
                    [
                        116.75482,
                        24.55257
                    ],
                    [
                        116.7744,
                        24.68577
                    ],
                    [
                        116.5263,
                        24.61164
                    ],
                    [
                        116.37396,
                        24.82911
                    ],
                    [
                        116.24717,
                        24.80104
                    ],
                    [
                        115.88802,
                        24.94606
                    ],
                    [
                        115.85123,
                        25.21803
                    ],
                    [
                        116.00347,
                        25.32764
                    ],
                    [
                        116.05573,
                        25.70263
                    ],
                    [
                        116.48487,
                        26.12096
                    ],
                    [
                        116.38111,
                        26.24533
                    ],
                    [
                        116.51532,
                        26.41748
                    ],
                    [
                        116.56372,
                        26.87496
                    ],
                    [
                        116.76079,
                        27.00054
                    ],
                    [
                        116.7609,
                        27.00284
                    ],
                    [
                        116.76197,
                        27.00462
                    ],
                    [
                        116.76289,
                        27.00534
                    ],
                    [
                        116.96453,
                        27.06324
                    ],
                    [
                        117.14518,
                        27.2468
                    ],
                    [
                        117.0367,
                        27.67524
                    ],
                    [
                        117.16836,
                        27.68302
                    ],
                    [
                        117.50704,
                        27.97892
                    ],
                    [
                        117.60566,
                        27.86806
                    ],
                    [
                        117.77304,
                        27.84273
                    ],
                    [
                        117.85137,
                        27.95013
                    ],
                    [
                        118.34752,
                        28.09052
                    ],
                    [
                        118.4286,
                        28.29166
                    ],
                    [
                        118.74963,
                        28.25673
                    ]
                ]
            ]
        ]
    };
    var shape = wkt.convert(geometry);
    var res = await conn.query("update xzqh set shape='" + shape + "' where code='35'");
    console.log(res);
}
//测试生成geojson
create_geojson();